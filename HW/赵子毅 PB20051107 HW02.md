### 赵子毅 PB20051107 HW02

#### R4:

不同意。P2P只是淡化了服务器的作用，并不代表通信会话中没有这两者。显然的是，发送文件的一方可以被称为服务器端，接收的成为客户端。

#### R5:

IP：端口的形式

#### R6:

UDP,协议简单，传输只需要使用一个RTT时间，相比于TCP的握手和传输的两阶段变为一阶段。

#### R9:

工作在应用层。该软件开发者应在他的软件代码中加入SSL功能，保证对SSL功能的support。

#### R13:

在浏览器发送HTTP请求时，该请求首先被指向到Web缓存器，然后Web缓存器检查本地是否存储了该申请对象的副本，如果有就会向客户浏览器用HTTP响应报文返回该对象。如果不考虑排队产生的数据拥堵，Web缓存只会减少缓存中的对象的访问时延，缓外对象甚至会由于多方问了一次Web缓存而造成额外的时间延迟。

#### R16:

该报文先通过HTTP从Alice的主机发送到邮件服务器，然后邮件服务器通过SMTP发送到bob的邮件服务器，Bob在通过POP3从他的邮件服务器接受邮件

#### R19：

可以，报文type=MX

#### R22：

根据规则，每隔30s一个用户就会随机选择另外一个邻居并向其发送块。所以Alice最总肯定是能得到块的

#### R23:

覆盖网络是P2P中由用户节点和连接节点之间的网络组成的。不包括路由器。边就是用户之间的网络链路连接。

#### R26:

因为TCP需要额外的欢迎套接字，传输数据的时候还需要一个连接套接字，且连接套接字是专有的。而UDP只需要一个套接字就可以传输所有客户端的数据。所以TCP需要n+1个套接字来满足n个链接。

#### P1：

1. F，每当解析到一个对象放松一个报文
2. Uncertain,一般来讲不行，但这种位于一个服务器上的应该是可以
3. F,不可能这么牛的
4. F,那是last_modified
5. F,谁说不行

#### P5:

1. 可以，返回代码200说明查找成功，2008.3.7 12：39：45 GMT
2. 2005.12.10 sat 18:27:46 GMT
3. 3874bytes
4. <!doc ，同意，从关键词Keep-Alive可见

#### P9:

1. $\Delta = 850000bits / 15000000bits/sec = 0.0567s$,$\beta\Delta=0.907$,平均接入时延是$\frac{0.567}{1-0.907}\approx0.6s$,总响应时间是3+0.6=3.6s
2. $\beta\Delta=0.6\cdot16\cdot0.567=0.544$,所以在缓存未命中的平均响应时间是$3+\frac{0.0567}{1-0.544}=3.124$,缓存命中可以近似认为没有延迟，所以总延迟的期望是0.4*3.124=1.25s

#### P10:

1. 非持续的HTTP连接：可见每个对象都可以被包含在一个数据分组中。记$T_{t}=\frac{10}{3\cdot10^8}=3.3\cdot10^{-8}s$为传输时延,总时间为$(200/150+T_t+200/150+T_t+200/150+T_t+100000/150+T_t)+$

   $(200/15+T_t+200/15+T_t+200/15+T_t+100000/15+T_t)\approx7377 s$

2. 持续的HTTP连接：$(200/150+T_t+200/150+T_t+200/150+T_t+100000/150+T_t)+$

   $10*(200/150+T_t+100000/15+T_t)\approx7351 s$

3.  可见，持续化HTTP并不显著快于非持续HTTP，这是由于时间主要花在传输下载的对象上引起的，传输数据对象的时间占比远大于HTTP协议握手的时间占比

#### P11:

1. 是的，Bob有更多的连接数，平均下来能占到更多带宽
2. 是的，不然他就被卷爆了，连接数比其他人少导致带宽少

#### P22:

$$
对于客户端-服务器端模式有：D_1=max\{\frac{NF}{u_s},\frac{F}{d_{min}}\}\\
对于P2P模式有：D_2=max\{\frac{F}{u_s},\frac{F}{d_{min}},\frac{NF}{u_s+\sum_{i=1}^{N}u_i}\}
$$

接下来只需要代入数据即可，客户端-服务器模式：



| u/N      | 10   | 100   | 1000   |
| -------- | ---- | ----- | ------ |
| 300 Kbps | 7680 | 51200 | 512000 |
| 700Kbps  | 7680 | 51200 | 512000 |
| 2Mbps    | 7680 | 51200 | 512000 |



P2P模式：512 7680(2)  

| u/N     | 10   | 100   | 1000  |
| ------- | ---- | ----- | ----- |
| 300Kbps | 7680 | 25904 | 47559 |
| 700Kbps | 7680 | 15616 | 21525 |
| 2Mbps   | 7680 | 7680  | 7680  |

#### P23:

1. 以$u_s/N$的速度向所有客户端发送，这样所有客户端都能在至多NF/us之后收到文件
2. 保证向每个客户端的传输速率都大于dmin即可，这样所有客户端将在至多F/dmin后收到文件
3. 易知$Time\ge max\{NF/u_s,F/d_{min}\}$,当$u_s/N\lt d_{min}$时，由1有$Time\le NF/u_s$,所以有$Time=NF/u_s$,当$u_s/N\gt d_{min}$时,同理由2可知$Time=F/d_{min}$。综上即可而出结论

#### P24:

1. $$
   记U=\sum_{i=1}^{N}{u_i},将文件切成N分，每份大小u_i/(uF)\\
   服务器以速率v_i=(u_i/U)u_s将第i份发给第i个用户\\
   同时，每个用户向所有其他用户以速率v_i发送自己的部分，下证该分发是合理的\\
   对于服务器，发送速度为\sum_{i=1}^{N}{v_i}=u_s,未超过服务器上传速度\\
   对于客户端，上传速度为{(N-1)v_i=(N-1)u_su_i/U\lt u_i},\\
   下载速度：v_i+\sum_{j\ne i}{v_j}=u_s,所以接收文件用时F/u_s
   $$

2. $$
   将文件分成N+1份，服务器以v_i=u_i/(N-1)的速率将第i分发给第i个用户\\
   同时将第N+1份以v_{N+1}=(u_s-\sum{v_i})/N发给所有人\\
   第i个用户将第i份以速率v_i发送给所有其他人\\
   对服务器\sum_{i=1}^{N}v_i+Nr_{N+1}=u_s\\
   对客户端，上传速率正好使用满，接受速率为：\\
   v_i+v_{N+1}+\sum_{i\ne j}{v_j}=(u_s+U)/N\\
   所以接收时间为NF/(u_s+U)
   $$

3. $$
   已知Time\ge max\{F/u_s,NF/(u_s+U)\}\\
   当u_s \le U/N, 由1可知Time \le F/u_s,Time = F/u_s
   $$
