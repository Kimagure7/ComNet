## 赵子毅 PB20051107 HW04

### Chapter.4:

#### R2：

数据平面：转发。将数据从输入链路转发到输出链路。

控制平面：路由选择。决定分组从发送方流向接收方时分组采用的路由或者路径。

#### R3:

转发：只涉及到一个路由器，时间很快，将数据从输入链路转发到输出链路，大多由硬件实现。

路由选择：涉及到网络中许多路由器，时间通常较久，决定分组的端对端的路径，大多由软件实现。

#### R10:

1. 经内存交换
2. 经总线交换
3. 经互联网交换
4. 经互联网交换可以

#### R11:

到达速率大于交换速率时，分组就会排队，超出缓冲区大小之后就会丢弃部分分组，造成丢包。若交换速率大于总输入速率即可有效减缓丢包现象。



#### R17：

IP数据报中有关键字段“协议”，指明上层协议是什么，6代表TCP，17代表UDP。

#### R30:

ipv6报文长度固定为40bytes，地址长度从32变为128bytes。有，例如六标签，版本，流量类型，有效载荷长度，下一个首部，跳限制。

#### R33：

基于目的地转发只会简单地判断IP头的数值然后选择转发的方向。但是openflow会比较很多值，还有计数器功能以及一系列的动作而不仅仅是转发。

#### P5:

1. |    匹配的前缀     | 链路端口 |
   | :---------------: | :------: |
   |    11100000 00    |    0     |
   | 11100000 01000000 |    1     |
   |      1110000      |    2     |
   |    11100001 1     |    3     |
   |       other       |    3     |

2. 前缀匹配啊，分别匹到323

#### P6:

1. 00000000 to 00111111 转发到0 64个
2. 01000000 to 01011111 转发到1 32个
3. 01100000 to 01111111 转发到2 二号共96个
4. 10000000 to 10111111 转发到2 共96
5. 11000000 to 11111111 转发到3 64个

#### P10：

| 匹配的前缀 | 链路端口 |
| :--------: | :------: |
|  224.0/10  |    0     |
| 224.64/16  |    1     |
|   224/8    |    2     |
| 225.128/9  |    3     |
|   other    |    3     |

#### P14:

总共$\lceil\frac{2400-20}{680}\rceil=4$个切片，前三个每个700bytes 后一个360bytes。

偏移字段：0,680,1360,2040 标识符1，1，1，0

#### P15:

$\lceil\frac{5\times10^6}{1460}\rceil=3425$,1460是由于IP和TCP报文各占20字节。每个分片最大1500，减去报文头40字节，有效数据1460，一除便是。

#### P16:

主机分别192.168.1.1,192.168.1.2,192.168.1.3 路由器192.168.1.4

**NAT转换表**

|       WAN端        |      LAN端       |
| :----------------: | :--------------: |
| 24.34.112.335,5001 | 192.168.1.1,3345 |
| 24.34.112.335,5002 | 192.168.1.1,3346 |
| 24.34.112.335,5003 | 192.168.1.2,3345 |
| 24.34.112.335,5004 | 192.168.1.2,3346 |
| 24.34.112.335,5005 | 192.168.1.3,3345 |
| 24.34.112.335,5006 | 192.168.1.3,3346 |



### Chapter.5

#### R1：

意味着路由选择算法运行在每个路由器上，且每个路由器只负责运行自己的算法，每个路由器通知其他路由器自己的信息以供计算转发表。整体地实现意味着每个路由器具有独立性和完备性，能够独立完成自己的转发和路由选择工作，

#### R4:

1. 对照链路算法可以求得源和目标之间的最短路径，需要整个网络中的所有星系。
2. DV算法使用递归的，分布式的方式，每个节点只知道自己的邻居的信息，也只知道该把一个包转发给哪个邻居，不需要网络中的全部信息。

#### R7:

因为问题的规模不一样，不同的算法的效率是不一样的，不同规模的AS可以使用不同的内部策略。另外，AS内部是不可以跨越边界访问其他AS的，在不同AS间，需要考虑很多策略，而在AS内部，很多时候只需要考虑性能就好了。

#### R8:

错，发送链路状态消息的时候会转发给AS内所有的其他路由。

#### P5：

缺省为infinite

u和y的消息对z其实是隐藏的，为了计算方便在此处一同列出

| 左Src上Dest | u    | v    | x    | y    | z    |
| :---------: | ---- | ---- | ---- | ---- | ---- |
|      u      |      |      |      |      |      |
|      v      |      |      |      |      |      |
|      x      |      |      |      |      |      |
|      y      |      |      |      |      |      |
|      z      |      | 6    | 2    |      | 0    |



| 左Src上Dest | u    | v    | x    | y    | z    |
| :---------: | ---- | ---- | ---- | ---- | ---- |
|      u      | 0    | 1    |      | 2    |      |
|      v      | 1    | 0    | 3    |      | 6    |
|      x      |      | 3    | 0    | 3    | 2    |
|      y      | 2    |      | 3    |      |      |
|      z      | 7    | 5    | 2    | 5    | 0    |



| 左Src上Dest | u    | v    | x    | y    | z    |
| :---------: | ---- | ---- | ---- | ---- | ---- |
|      u      | 0    | 1    | 4    | 2    | 7    |
|      v      | 1    | 0    | 3    | 3    | 5    |
|      x      | 4    | 3    | 0    | 3    | 2    |
|      y      | 2    | 3    | 3    | 0    | 5    |
|      z      | 6    | 5    | 2    | 5    | 0    |

#### P8：

##### Node x:

| S\D  | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| x    | 0    | 3    | 4    |
| y    |      |      |      |
| z    |      |      |      |

| S\D  | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| x    | 0    | 3    | 4    |
| y    | 3    | 0    | 6    |
| z    | 4    | 6    | 0    |

##### Node y:

| S\D  | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| x    |      |      |      |
| y    | 3    | 0    | 6    |
| z    |      |      |      |

| S\D  | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| x    | 0    | 3    | 4    |
| y    | 3    | 0    | 6    |
| z    | 4    | 6    | 0    |

##### Node z:

| S\D  | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| x    |      |      |      |
| y    |      |      |      |
| z    | 4    | 6    | 0    |

| S\D  | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| x    | 0    | 3    | 4    |
| y    | 3    | 0    | 6    |
| z    | 4    | 6    | 0    |

#### P14：

1. eBGP
2. iBGP
3. eBGP
4. iBGP,即RIP

#### P15：

1. 无法确定，未定义开销。若定义为穿过的链路数，根据最短路径原则，走1a到1c是最快的路，所以走I1.
2. 若使用的是热土豆选择算法，2a的NEXT-HOP更短，走I2，若使用路由器选择算法，由于本地偏好未给出，无法计算。
3. 若使用的是热土豆算法，2a的NEXT-HOP更短，走I2，若使用路由选择算法，假定偏好相同，走I1会有更短的AS-PATH，所以走I1.
